webpackJsonp([9],{F3Hj:function(t,e,a){(t.exports=a("BkJT")(!1)).push([t.i,'\n.text {\n    font-size: 14px;\n}\n.item {\n    margin-bottom: 18px;\n}\n.clearfix:before,\n.clearfix:after {\n    display: table;\n    content: "";\n}\n.clearfix:after {\n    clear: both\n}\n.box-card {\n    /*width: 480px;*/\n    margin-left: 5px;\n}\n',""])},Gnkd:function(t,e,a){"use strict";e.a=function(){return n.a.getAsteroid()},e.b=function(t){return n.a.getAsteroid().call("getCommunityList",t)},e.d=function(t,e){return n.a.getAsteroid().call("getOrderList",t,e)},e.e=function(t,e,a){return n.a.getAsteroid().call("getSoFarSales",t,e,a)},e.c=function(t,e,a){return n.a.getAsteroid().call("getItemStat",t,e,a)};var n=a("T452")},Thqs:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("T452");var n=a("Gnkd"),r=(a("KC6+"),a("TIfe")),s=(a("6ROu"),{data:function(){return{date_range:"",sales_stat:[],item_num_stat:[],sum:0,platform_id:""}},created:function(){this.platform_id=Object(r.a)()._id},methods:{handleSearch:function(){var t=this,e=this.date_range[0]+" 00:00:00",a=this.date_range[1]+" 23:59:59";Object(n.e)(this.platform_id,e,a).then(function(e){if(0==e.code){var a=0,n=e.result;t.sales_stat=n,t.sales_stat.forEach(function(t){a+=t.total}),t.sum=a}}),Object(n.c)(this.platform_id,e,a).then(function(e){if(0==e.code){var a=e.result;t.item_num_stat=a}})},handleDownload1:function(){var t=this;Promise.all([a.e(17),a.e(16)]).then(a.bind(null,"zWO4")).then(function(e){var a=t.sales_stat,n=t.formatJson(["_id","total"],a),r="各社区销售额汇总-"+t.date_range[0]+"-"+t.date_range[1];e.export_json_to_excel({header:["社区名称","销售额"],data:n,filename:r,autoWidth:t.autoWidth})})},handleDownload2:function(){var t=this;Promise.all([a.e(17),a.e(16)]).then(a.bind(null,"zWO4")).then(function(e){var a=t.item_num_stat,n=t.formatJson(["_id","total"],a),r="开团项目销量汇总-"+t.date_range[0]+"-"+t.date_range[1];e.export_json_to_excel({header:["开团项目","销量"],data:n,filename:r,autoWidth:t.autoWidth})})},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return"sale_price"===t||"num"===t||"morePrice"===t?parseFloat(e[t]):e[t]})})}}}),l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container tab-container"},[a("el-row",{attrs:{gutter:8}},[a("el-col",{staticStyle:{"padding-right":"8px","margin-bottom":"30px"},attrs:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:24},xl:{span:24}}},[a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"},[t._v("请选择时间段")]),t._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至 ","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:t.date_range,callback:function(e){t.date_range=e},expression:"date_range"}}),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleSearch}},[t._v("检索")])],1),t._v(" "),a("br"),t._v(" "),a("span",{staticClass:"demonstration"},[t._v("这个时间段的总销售额："+t._s(t.sum))])])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:12},xl:{span:12}}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("各社区销售额")]),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text",icon:"document"},on:{click:t.handleDownload1}},[t._v("\n                        "+t._s(t.$t("excel.export"))+" excel\n                    ")])],1),t._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.sales_stat,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"community",label:"社区"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                                "+t._s(e.row._id)+"\n                            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"total",label:"销售额"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                                "+t._s(e.row.total)+"\n                            ")]}}])})],1)],1)])],1),t._v(" "),a("el-col",{attrs:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:12},xl:{span:12}}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("各开团项目销量")]),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text",icon:"document"},on:{click:t.handleDownload2}},[t._v("\n                        "+t._s(t.$t("excel.export"))+" excel\n                    ")])],1),t._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.item_num_stat,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"item_title",label:"开团项目"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                                "+t._s(e.row._id)+"\n                            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"total",label:"销量"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                                "+t._s(e.row.total)+"\n                            ")]}}])})],1)],1)])],1)],1)],1)},staticRenderFns:[]};var o=a("vSla")(s,l,!1,function(t){a("xbFo")},null,null);e.default=o.exports},xbFo:function(t,e,a){var n=a("F3Hj");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("8bSs")("3115e652",n,!0)}});